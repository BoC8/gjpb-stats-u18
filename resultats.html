<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Tous les r√©sultats ‚Äî GJPB</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

    <style>
        /* === VARIABLES CSS === */
        :root {
            --color-sky-blue: #6EC1FF;
            --color-light-blue: #9FD6FF;
            --color-white: #fff;
            --color-navy: #1e3a5f;
            --color-gold: #FFD700;
            --color-text-dark: #2c3e50;
            --color-text-light: #7f8c8d;
            --color-success: #10b981;
            --color-info: #3b82f6;
            --color-danger: #ef4444;
            --color-warning: #f59e0b;
            --font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            --max-width: 1200px;
            --padding-mobile: 1rem;
            --padding-desktop: 2rem;
            --border-radius: 16px;
            --shadow: 0 4px 20px rgba(0, 0, 0, .08);
            --shadow-hover: 0 8px 40px rgba(0, 0, 0, .15);
            --transition: all .3s ease;
            --gradient-primary: linear-gradient(135deg, var(--color-sky-blue), var(--color-navy));
            --gradient-card: linear-gradient(135deg, #fff, #f8fafc);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box
        }

        body {
            font-family: var(--font-family);
            line-height: 1.6;
            color: var(--color-text-dark);
            background: linear-gradient(135deg, var(--color-white) 0%, var(--color-light-blue) 100%);
            min-height: 100vh;
            overflow-x: hidden
        }

        .container {
            max-width: var(--max-width);
            margin: 0 auto;
            padding: 0 var(--padding-mobile)
        }

        /* === HEADER === */
        header {
            background: var(--color-white);
            box-shadow: var(--shadow);
            position: sticky;
            top: 0;
            z-index: 100
        }

        .header-content {
            display: grid;
            grid-template-columns: 1fr 2fr 1fr;
            align-items: center;
            height: 70px;
            max-width: var(--max-width);
            margin: 0 auto;
            padding: 0 var(--padding-mobile)
        }

        .logo {
            font-size: 1.5rem;
            font-weight: 600;
            color: var(--color-navy);
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: .5rem
        }

        .logo img {
            width: 40px;
            height: 40px;
            object-fit: contain
        }

        .nav-desktop {
            display: none;
            justify-content: center;
            align-items: center;
            gap: 70px
        }

        .login-desktop {
            justify-self: end;
            display: none
        }

        .nav-links {
            display: flex;
            gap: 50px;
            justify-content: center;
            list-style: none
        }

        .nav-links a {
            text-decoration: none;
            color: var(--color-text-dark);
            font-weight: 500;
            padding: .5rem 1rem;
            border-radius: 6px;
            transition: var(--transition);
            position: relative
        }

        .nav-links a:hover,
        .nav-links a:focus {
            background: var(--color-light-blue);
            color: var(--color-navy);
            outline: 2px solid var(--color-sky-blue)
        }

        .login-btn {
            justify-self: end;
            background: var(--color-sky-blue);
            color: var(--color-white);
            padding: .75rem 1.5rem;
            border-radius: var(--border-radius);
            text-decoration: none;
            font-weight: 500;
            transition: var(--transition)
        }

        .login-btn:hover,
        .login-btn:focus {
            background: var(--color-navy);
            transform: translateY(-1px);
            outline: 2px solid var(--color-gold)
        }

        .mobile-menu-btn {
            display: block;
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--color-navy);
            padding: .5rem;
            border-radius: 6px;
            transition: var(--transition)
        }

        .mobile-menu-btn:hover,
        .mobile-menu-btn:focus {
            background: var(--color-light-blue);
            outline: 2px solid var(--color-sky-blue)
        }

        .mobile-menu {
            display: none;
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: var(--color-white);
            box-shadow: var(--shadow);
            padding: 1rem;
            text-align: center
        }

        .mobile-menu.open {
            display: block;
            animation: slideDown .3s ease
        }

        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateY(-10px)
            }

            to {
                opacity: 1;
                transform: translateY(0)
            }
        }

        .mobile-nav-links {
            list-style: none;
            margin-bottom: 1rem
        }

        .mobile-nav-links li {
            margin-bottom: .5rem
        }

        .mobile-nav-links a {
            display: block;
            padding: .75rem 1rem;
            text-decoration: none;
            color: var(--color-text-dark);
            font-weight: 500;
            border-radius: 6px;
            transition: var(--transition)
        }

        .mobile-nav-links a:hover,
        .mobile-nav-links a:focus {
            background: var(--color-light-blue);
            color: var(--color-navy)
        }

        /* === PAGE TITLE === */
        .page-hero {
            padding: 3rem 0 1.5rem;
            text-align: center;
            position: relative;
            overflow: hidden
        }

        .page-hero::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(ellipse, rgba(110, 193, 255, 0.1) 0%, transparent 70%);
            transform: translate(-50%, -50%);
            z-index: 0
        }

        .page-hero-content {
            position: relative;
            z-index: 1
        }

        .page-hero h1 {
            font-size: 2.8rem;
            color: var(--color-navy);
            font-weight: 700;
            margin-bottom: 1rem;
            background: linear-gradient(135deg, var(--color-navy), var(--color-sky-blue));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .page-hero p {
            color: var(--color-text-light);
            font-size: 1.1rem;
            max-width: 600px;
            margin: 0 auto;
            font-weight: 400
        }

        /* ====== FILTRES AM√âLIOR√âS ====== */
        .filters-container {
            background: #fff;
            border-radius: 12px;
            box-shadow: var(--shadow);
            padding: 16px;
            margin: 16px 0;
            border: 1px solid rgba(0, 0, 0, .06);
        }

        .filters-header {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 12px;
            font-weight: 600;
            color: var(--color-navy);
        }

        .filters-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 16px;
        }

        .filter-group {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .filter-group-title {
            font-size: 0.9rem;
            font-weight: 600;
            color: var(--color-text-dark);
            margin-bottom: 4px;
        }

        .filter-options {
            display: flex;
            flex-wrap: wrap;
            gap: 6px;
        }

        .filter-chip {
            display: flex;
            align-items: center;
            gap: 4px;
            padding: 4px 8px;
            background: #f8fafc;
            border: 1px solid #e2e8f0;
            border-radius: 20px;
            font-size: 0.85rem;
            cursor: pointer;
            transition: all 0.2s ease;
            user-select: none;
        }

        .filter-chip:hover {
            background: #e2e8f0;
        }

        .filter-chip.active {
            background: var(--color-sky-blue);
            color: white;
            border-color: var(--color-sky-blue);
        }

        .filter-chip input[type="checkbox"] {
            display: none;
        }

        @media (max-width: 600px) {
            .filters-grid {
                grid-template-columns: 1fr;
                gap: 12px;
            }

            .filter-options {
                gap: 4px;
            }

            .filter-chip {
                font-size: 0.8rem;
                padding: 3px 6px;
            }
        }

        /* === LISTE DES R√âSULTATS === */
        .results-wrapper {
            background: var(--color-white);
            box-shadow: var(--shadow);
            border-radius: var(--border-radius);
            padding: 1.5rem;
            margin: 1rem 0 2.5rem;
            border: 1px solid rgba(110, 193, 255, 0.1);
        }

        .month-sep {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin: 2rem 0 1rem;
            position: relative
        }

        .month-sep::before {
            content: '';
            position: absolute;
            left: 0;
            right: 0;
            height: 1px;
            background: linear-gradient(90deg, transparent, rgba(110, 193, 255, 0.3), transparent);
            z-index: 0
        }

        .month-sep .label {
            background: var(--color-white);
            padding: 0 1rem;
            font-weight: 700;
            color: var(--color-navy);
            font-size: 1.1rem;
            letter-spacing: 0.5px;
            position: relative;
            z-index: 1;
            border-radius: 20px;
            border: 2px solid rgba(110, 193, 255, 0.2)
        }

        .result-item {
            display: grid;
            grid-template-columns: auto 1fr auto 1fr;
            align-items: center;
            gap: 12px;
            padding: 1rem;
            margin: 0.5rem 0;
            border-radius: 12px;
            background: linear-gradient(135deg, #fafbfc, #f8fafc);
            border: 1px solid rgba(0, 0, 0, 0.06);
            transition: var(--transition);
            cursor: pointer;
            position: relative;
            overflow: hidden
        }

        .result-item::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            bottom: 0;
            width: 4px;
            background: #e5e7eb;
            transition: var(--transition)
        }

        .result-item:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-hover);
            background: linear-gradient(135deg, #fff, #fafbfc)
        }

        .result-item:active {
            transform: translateY(0)
        }

        .compdate {
            display: flex;
            flex-direction: column;
            justify-content: center;
            line-height: 1.1;
            gap: 4px;
            min-width: 100px
        }

        .competition {
            color: var(--color-info);
            font-weight: 600;
            font-size: 0.8rem;
            padding: 0.2rem 0.5rem;
            background: rgba(59, 130, 246, 0.1);
            border-radius: 6px;
            text-align: center
        }

        .date {
            color: var(--color-text-light);
            font-size: 0.85rem;
            font-weight: 500;
            text-align: center
        }

        .result-teams {
            font-weight: 600;
            color: var(--color-navy);
            display: flex;
            flex-direction: column;
            justify-content: center;
            line-height: 1.2;
            gap: 4px
        }

        .result-score {
            display: flex;
            justify-content: center;
            font-weight: 800;
            font-size: 1.1rem
        }

        .score-chip {
            display: inline-block;
            padding: 0.4rem 0.8rem;
            border-radius: 20px;
            border: 1px solid rgba(59, 130, 246, 0.2);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
            min-width: 80px;
            text-align: center;
            white-space: nowrap;
            color: var(--color-white);
            font-weight: 700
        }

        .score-chip.victory {
            background: linear-gradient(135deg, var(--color-success), #059669);
        }

        .score-chip.draw {
            background: linear-gradient(135deg, var(--color-warning), #d97706);
        }

        .score-chip.defeat {
            background: linear-gradient(135deg, var(--color-danger), #dc2626);
        }

        .score-chip.default {
            background: linear-gradient(135deg, #e5eef9, #f0f7ff);
            color: var(--color-navy);
        }

        .team-part {
            display: block;
            font-size: 0.9rem
        }

        .team-gjpb {
            color: var(--color-info);
            font-weight: 700;
            padding: 0.25rem 0.5rem;
            border-radius: 8px;
            background: rgba(59, 130, 246, 0.1);
            margin: 0.1rem;
            text-align: center;
            display: block
        }

        .team-adversaire {
            color: var(--color-text-dark);
            font-weight: 500;
            padding: 0.25rem 0.5rem;
            border-radius: 8px;
            background: rgba(0, 0, 0, 0.05);
            margin: 0.1rem;
            text-align: center;
            display: block
        }

        .result-item.victory::before {
            background: var(--color-success)
        }

        .result-item.draw::before {
            background: var(--color-warning)
        }

        .result-item.defeat::before {
            background: var(--color-danger)
        }

        /* === D√âTAILS EXPANDABLES === */
        .match-details {
            display: none;
            /* background: linear-gradient(135deg, #f8fafc, #f1f5f9); */
            background-color: rgb(227, 236, 240);
            border-radius: 8px;
            margin: 0.3rem 0;
            padding: 1rem;
            box-shadow: 0 1px 8px rgba(0, 0, 0, 0.04);
            animation: expandDetails 0.3s ease
        }

        .match-details.show {
            display: block
        }

        .result-item.expanded {
            background: linear-gradient(135deg, #fff, #f8fafc);
            box-shadow: var(--shadow-hover);
        }

        @keyframes expandDetails {
            from {
                opacity: 0;
                max-height: 0;
                padding: 0 1rem
            }

            to {
                opacity: 1;
                max-height: 300px;
                padding: 1rem
            }
        }

        .details-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 0.8rem
        }

        .details-section {
            /* background: rgba(255, 255, 255, 0.7); */
            background-color: white;
            border-radius: 6px;
            padding: 0.4rem;
        }

        .details-title {
            font-size: 0.75rem;
            font-weight: 600;
            color: var(--color-navy);
            margin-bottom: 0.4rem;
            display: flex;
            align-items: center;
            gap: 0.3rem;
            text-transform: uppercase;
            letter-spacing: 0.5px
        }

        .details-list {
            list-style: none;
            margin: 0;
            padding: 0
        }

        .details-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0.2rem 0;
            font-size: 0.85rem
        }

        .details-item:not(:last-child) {
            border-bottom: 1px solid rgba(0, 0, 0, 0.04)
        }

        .details-player {
            font-weight: 500;
            color: var(--color-text-dark);
            flex: 1;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
            margin-right: 0.5rem
        }

        .details-count {
            background: var(--color-info);
            color: var(--color-white);
            padding: 0.1rem 0.3rem;
            border-radius: 8px;
            font-size: 0.7rem;
            font-weight: 600;
            min-width: 18px;
            text-align: center;
            flex-shrink: 0
        }

        .details-notes {
            color: var(--color-text-dark);
            line-height: 1.4;
            padding: 0.6rem;
            background: rgba(110, 193, 255, 0.05);
            border-radius: 6px;
            border-left: 3px solid var(--color-info);
            font-style: italic;
            font-size: 0.85rem;
            grid-column: 1 / -1
        }

        .details-info-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 0.3rem;
            grid-column: 1 / -1
        }

        .details-tag {
            background: rgba(110, 193, 255, 0.1);
            color: var(--color-navy);
            padding: 0.15rem 0.4rem;
            border-radius: 12px;
            font-size: 0.7rem;
            font-weight: 500;
            white-space: nowrap
        }

        .no-details {
            text-align: center;
            color: var(--color-text-light);
            font-style: italic;
            padding: 0.6rem 0;
            font-size: 0.85rem
        }

        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.6);
            backdrop-filter: blur(4px);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            padding: 1rem;
            animation: fadeIn 0.3s ease
        }

        .modal-overlay.show {
            display: flex
        }

        @keyframes fadeIn {
            from {
                opacity: 0
            }

            to {
                opacity: 1
            }
        }

        .modal {
            background: var(--color-white);
            border-radius: var(--border-radius);
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            max-width: 600px;
            width: 100%;
            max-height: 90vh;
            overflow-y: auto;
            position: relative;
            animation: slideUp 0.3s ease
        }

        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(30px) scale(0.95)
            }

            to {
                opacity: 1;
                transform: translateY(0) scale(1)
            }
        }

        .modal-header {
            padding: 2rem 2rem 1rem;
            border-bottom: 1px solid rgba(0, 0, 0, 0.1);
            position: relative
        }

        .modal-close {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--color-text-light);
            padding: 0.5rem;
            border-radius: 50%;
            transition: var(--transition);
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center
        }

        .modal-close:hover {
            background: rgba(0, 0, 0, 0.1);
            color: var(--color-text-dark)
        }

        .modal-match-info {
            text-align: center
        }

        .modal-teams {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin: 1rem 0
        }

        .modal-team {
            font-size: 1.2rem;
            font-weight: 600;
            color: var(--color-navy)
        }

        .modal-score {
            font-size: 2rem;
            font-weight: 800;
            color: var(--color-info);
            padding: 0.5rem 1rem;
            background: linear-gradient(135deg, rgba(59, 130, 246, 0.1), rgba(110, 193, 255, 0.1));
            border-radius: 15px;
            border: 2px solid rgba(59, 130, 246, 0.2)
        }

        .modal-competition {
            color: var(--color-info);
            font-weight: 600;
            margin-bottom: 0.5rem
        }

        .modal-date {
            color: var(--color-text-light);
            font-size: 0.95rem
        }

        .modal-body {
            padding: 1.5rem 2rem 2rem
        }

        .modal-section {
            margin-bottom: 1.5rem
        }

        .modal-section-title {
            font-size: 1.1rem;
            font-weight: 600;
            color: var(--color-navy);
            margin-bottom: 0.75rem;
            padding-bottom: 0.5rem;
            border-bottom: 2px solid rgba(110, 193, 255, 0.2)
        }

        .modal-list {
            list-style: none
        }

        .modal-list-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0.5rem 0;
            border-bottom: 1px solid rgba(0, 0, 0, 0.05)
        }

        .modal-list-item:last-child {
            border-bottom: none
        }

        .player-name {
            font-weight: 500;
            color: var(--color-text-dark)
        }

        .player-count {
            background: var(--color-info);
            color: var(--color-white);
            padding: 0.2rem 0.5rem;
            border-radius: 12px;
            font-size: 0.8rem;
            font-weight: 600;
            min-width: 24px;
            text-align: center
        }

        .no-data {
            text-align: center;
            color: var(--color-text-light);
            font-style: italic;
            padding: 1rem 0
        }

        /* === FOOTER === */
        .footer {
            background: var(--color-navy);
            color: var(--color-white);
            text-align: center;
            padding: 3rem 0;
            margin-top: auto;
            position: relative;
            overflow: hidden
        }

        .footer::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: var(--gradient-primary)
        }

        .footer a {
            color: var(--color-light-blue);
            text-decoration: none;
            font-weight: 500;
            transition: var(--transition);
            padding: .25rem .5rem;
            border-radius: 6px
        }

        .footer a:hover,
        .footer a:focus {
            color: var(--color-gold);
            background: rgba(255, 215, 0, .1);
            transform: translateY(-2px);
            outline: none
        }

        /* === RESPONSIVE === */
        @media (max-width: 768px) {
            .page-hero h1 {
                font-size: 2.2rem
            }

            .result-item {
                grid-template-columns: auto 1fr 60px 1fr;
                gap: 6px;
                padding: 0.6rem
            }

            .compdate {
                min-width: 70px
            }

            .competition {
                font-size: 0.65rem;
                padding: 0.1rem 0.3rem
            }

            .date {
                font-size: 0.7rem
            }

            .score-chip {
                min-width: 55px;
                font-size: 0.8rem;
                padding: 0.2rem 0.4rem
            }

            .team-part {
                font-size: 0.75rem;
                padding: 0.15rem 0.3rem
            }

            .stats-grid {
                grid-template-columns: repeat(2, 1fr)
            }

            .stat-value {
                font-size: 1.4rem
            }

            .stat-label {
                font-size: 0.75rem
            }

            .match-details {
                padding: 1rem;
                margin: 0.3rem 0
            }

            .details-title {
                font-size: 0.9rem
            }

            .details-item {
                padding: 0.3rem 0
            }

            .details-player {
                font-size: 0.85rem
            }

            .details-count {
                font-size: 0.7rem;
                padding: 0.1rem 0.3rem
            }

            .details-notes {
                font-size: 0.85rem;
                padding: 0.6rem
            }

            .details-tag {
                font-size: 0.7rem;
                padding: 0.15rem 0.4rem
            }

            .team-gjpb {
                font-size: 0.7rem;
            }

            .team-adversaire {
                font-size: 0.7rem;
            }

            .details-player,
            .details-count,
            .details-title,
            .details-notes,
            .details-tag {
                font-size: 0.5rem;
            }
        }

        @media (min-width: 769px) {
            .container {
                padding: 0 var(--padding-desktop)
            }

            .header-content {
                padding: 0 var(--padding-desktop)
            }

            .nav-desktop {
                display: flex
            }

            .login-desktop {
                display: inline-flex
            }

            .mobile-menu-btn {
                display: none
            }
        }
    </style>
</head>

<body>
    <!-- Header -->
    <header class="header">
        <div class="header-content">
            <a href="index.html" class="logo" aria-label="Accueil du club de foot jeunesse">
                <img src="logo-gjpb.png" alt="Logo GJPB">
            </a>

            <nav class="nav-desktop" aria-label="Navigation principale">
                <ul class="nav-links">
                    <li><a href="18A.html" aria-label="√âquipe 18 ans A">18A</a></li>
                    <li><a href="17.html" aria-label="√âquipe 17 ans">17</a></li>
                    <li><a href="18B.html" aria-label="√âquipe 18 ans B">18B</a></li>
                </ul>
            </nav>

            <a href="login.html" class="login-btn login-desktop" aria-label="Se connecter √† votre compte">Se
                connecter</a>
            <button class="mobile-menu-btn" aria-label="Ouvrir le menu de navigation" aria-expanded="false"
                aria-controls="mobile-menu">
                <span aria-hidden="true">‚ò∞</span>
            </button>
        </div>

        <nav id="mobile-menu" class="mobile-menu" aria-label="Navigation mobile">
            <ul class="mobile-nav-links">
                <li><a href="18A.html" aria-label="√âquipe 18 ans A">18A</a></li>
                <li><a href="17.html" aria-label="√âquipe 17 ans">17</a></li>
                <li><a href="18B.html" aria-label="√âquipe 18 ans B">18B</a></li>
            </ul>
            <a href="login.html" class="login-btn" aria-label="Se connecter √† votre compte">Se connecter</a>
        </nav>
    </header>

    <main class="container">
        <section class="page-hero">
            <div class="page-hero-content">
                <h1>Tous les r√©sultats</h1>
                <p>Historique complet des matchs, du plus r√©cent au plus ancien, avec statistiques
                    d√©taill√©es (en selectionnant un match).</p>
            </div>
        </section>

        <!-- ====== FILTRES AM√âLIOR√âS ====== -->
        <div class="filters-container">
            <div class="filters-header">
                üîç Filtres
            </div>
            <div class="filters-grid">
                <div class="filter-group">
                    <div class="filter-group-title">√âquipes</div>
                    <div class="filter-options">
                        <label class="filter-chip active">
                            <input type="checkbox" class="team-filter" value="18A" checked>
                            18A
                        </label>
                        <label class="filter-chip active">
                            <input type="checkbox" class="team-filter" value="17" checked>
                            17
                        </label>
                        <label class="filter-chip active">
                            <input type="checkbox" class="team-filter" value="18B" checked>
                            18B
                        </label>
                    </div>
                </div>
            </div>
        </div>



        <section class="results-wrapper">
            <div id="results-list" aria-live="polite"></div>
        </section>
    </main>

    <!-- Modal pour les d√©tails du match -->
    <div class="modal-overlay" id="modal-overlay" style="display: none;">
        <!-- Modal supprim√© car remplac√© par les d√©tails expandables -->
    </div>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <p>
                    <a href="https://www.gjpb44.com/" aria-label="Visiter le site officiel du club">üåê Site GJPB</a>
                    | ¬© 2025 - By Cl√©ment Bolomey
                </p>
            </div>
        </div>
    </footer>

    <script>
        // === SUPABASE CONFIG ===
        const SUPABASE_URL = 'https://lgnwgbctaqaeawzjnuqh.supabase.co';
        const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImxnbndnYmN0YXFhZWF3empudXFoIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTM4MjYzNjUsImV4cCI6MjA2OTQwMjM2NX0.E0ug5jpRQVh55aq1ewToqol7h7aRPkg7YvwbKpQtVHo';
        const supabase = window.supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY, { auth: { persistSession: false, autoRefreshToken: false } });

        let allMatches = [];

        // === MENU MOBILE ===
        document.addEventListener('DOMContentLoaded', function () {
            const menuBtn = document.querySelector('.mobile-menu-btn');
            const mobileMenu = document.querySelector('.mobile-menu');
            if (menuBtn && mobileMenu) {
                menuBtn.addEventListener('click', function () {
                    const isOpen = mobileMenu.classList.contains('open');
                    mobileMenu.classList.toggle('open', !isOpen);
                    menuBtn.setAttribute('aria-expanded', String(!isOpen));
                    menuBtn.setAttribute('aria-label', !isOpen ? 'Fermer le menu de navigation' : 'Ouvrir le menu de navigation');
                });
            }
            const mobileLinks = document.querySelectorAll('.mobile-nav-links a, .mobile-menu .login-btn');
            mobileLinks.forEach(link => link.addEventListener('click', () => {
                if (mobileMenu.classList.contains('open')) {
                    mobileMenu.classList.remove('open');
                    menuBtn.setAttribute('aria-expanded', 'false');
                    menuBtn.setAttribute('aria-label', 'Ouvrir le menu de navigation');
                }
            }));


            // Gestion des d√©tails expandables
            setupExpandableDetails();

            // Charger tous les r√©sultats
            applyTeamFromURL();
            loadAllResults();

            // rendre aussi le clic direct sur la checkbox r√©actif
            document.querySelectorAll('.filter-chip input[type="checkbox"]').forEach(input => {
                input.addEventListener('change', () => {
                    input.closest('.filter-chip')?.classList.toggle('active', input.checked);
                    renderResults(); // re-filtre imm√©diatement
                });
            });
        });

        // === D√âTAILS EXPANDABLES ===
        function setupExpandableDetails() {
            // Pas besoin de setup initial car les √©v√©nements sont ajout√©s dynamiquement
        }

        // charge actions d'un match (Goal/Assist) et renvoie {goals:[{name,count}], assists:[{name,count}]}
        async function fetchActionsForMatch(matchId) {
            const out = { goals: [], assists: [] };
            if (!matchId) return out;

            const { data, error } = await supabase
                .from('actions')
                .select('joueur, type')
                .eq('match_id', matchId);

            if (error) {
                console.error('Erreur actions:', error);
                return out;
            }

            // Regrouper et compter par joueur
            const cnt = (rows, type) => {
                const map = new Map();
                rows.filter(r => r.type === type).forEach(r => {
                    map.set(r.joueur, (map.get(r.joueur) || 0) + 1);
                });
                return [...map.entries()]
                    .map(([name, count]) => ({ name, count }))
                    .sort((a, b) => b.count - a.count || a.name.localeCompare(b.name));
            };

            out.goals = cnt(data || [], 'Goal');
            out.assists = cnt(data || [], 'Assist');
            return out;
        }


        async function toggleMatchDetails(matchElement, match) {
            const existingDetails = matchElement.nextElementSibling;

            // si d√©j√† ouvert ‚Üí fermer
            if (existingDetails && existingDetails.classList.contains('match-details')) {
                existingDetails.remove();
                matchElement.classList.remove('expanded');
                return;
            }

            // fermer les autres
            document.querySelectorAll('.match-details').forEach(d => d.remove());
            document.querySelectorAll('.result-item.expanded').forEach(i => i.classList.remove('expanded'));

            // charger actions pour ce match
            let acts = { goals: [], assists: [] };
            try {
                acts = await fetchActionsForMatch(match.id);
            } catch (e) {
                console.warn('Actions non charg√©es :', e);
            }

            // cr√©er + ins√©rer le panneau d√©tail
            const detailsElement = createMatchDetails(match, acts);
            matchElement.insertAdjacentElement('afterend', detailsElement);
            matchElement.classList.add('expanded');

            // animation
            setTimeout(() => detailsElement.classList.add('show'), 10);
        }

        function applyTeamFromURL() {
            const params = new URLSearchParams(window.location.search);
            const t = (params.get('team') || '').toUpperCase(); // "18A" | "17" | "18B"
            if (!t) return; // sans param, on garde tout coch√©

            // D√©coche tout, ne coche que t
            document.querySelectorAll('.team-filter').forEach(input => {
                const isWanted = input.value.toUpperCase() === t;
                input.checked = isWanted;
                input.closest('.filter-chip')?.classList.toggle('active', isWanted);
            });
        }

        function selectedTeams() {
            const set = new Set();
            document.querySelectorAll('.team-filter:checked').forEach(cb => set.add(cb.value));
            return set;
        }


        function createMatchDetails(match, actions) {
            const detailsDiv = document.createElement('div');
            detailsDiv.className = 'match-details';

            let content = '';

            // Tags infos
            const infos = [];
            if (match.lieu) {
                const txt = (match.lieu || '').toLowerCase();
                infos.push(txt === 'dom' || txt === 'domicile' ? 'üìç √Ä domicile' : 'üìç √Ä l‚Äôext√©rieur');
            }
            if (match.equipe) infos.push(`üëï √âquipe ${match.equipe}`);

            if (infos.length) {
                content += `
      <div class="details-section">
        <div class="details-info-tags">
          ${infos.map(i => `<span class="details-tag">${i}</span>`).join('')}
        </div>
      </div>
    `;
            }

            if (!content) {
                content = '<div class="no-details">Aucune information suppl√©mentaire disponible pour ce match.</div>';
            }

            // Buteurs depuis actions
            if (actions.goals && actions.goals.length) {
                content += `
      <div class="details-section">
        <h4 class="details-title">‚öΩ Buteurs</h4>
        <ul class="details-list">
          ${actions.goals.map(p => `
            <li class="details-item">
              <span class="details-player">${p.name}</span>
              <span class="details-count">${p.count}</span>
            </li>
          `).join('')}
        </ul>
      </div>
    `;
            }

            // Passeurs depuis actions
            if (actions.assists && actions.assists.length) {
                content += `
      <div class="details-section">
        <h4 class="details-title">üéØ Passeurs</h4>
        <ul class="details-list">
          ${actions.assists.map(p => `
            <li class="details-item">
              <span class="details-player">${p.name}</span>
              <span class="details-count">${p.count}</span>
            </li>
          `).join('')}
        </ul>
      </div>
    `;
            }

            // Notes √©ventuelles (si tu ajoutes un champ plus tard)
            if (match.notes && match.notes.trim()) {
                content += `
      <div class="details-section">
        <h4 class="details-title">üìù Notes</h4>
        <div class="details-notes">${match.notes}</div>
      </div>
    `;
            }

            detailsDiv.innerHTML = content;
            return detailsDiv;
        }


        // === UTILS ===
        function monthKey(dateStr) {
            const d = new Date((dateStr || '').slice(0, 10));
            const y = d.getFullYear();
            const m = d.toLocaleString('fr-FR', { month: 'long' });
            return `${m.charAt(0).toUpperCase() + m.slice(1)} ${y}`;
        }

        function frDate(dateStr) {
            return new Date((dateStr || '').slice(0, 10)).toLocaleDateString('fr-FR');
        }

        function getResultClass(resultat) {
            if (!resultat) return '';
            const r = resultat.toLowerCase();
            if (r === 'victoire' || r === 'v') return 'victory';
            if (r === 'nul' || r === 'n') return 'draw';
            if (r === 'defaite' || r === 'd√©faite' || r === 'd') return 'defeat';
            return '';
        }

        function formatTeamName(teamName, isGjpb = false) {
            const baseClass = isGjpb ? 'team-gjpb' : 'team-adversaire';
            if ((teamName || '').length > 18) {
                const spaceIndex = teamName.indexOf(' ', 5);
                if (spaceIndex !== -1 && spaceIndex <= 12) {
                    const a = teamName.substring(0, spaceIndex);
                    const b = teamName.substring(spaceIndex + 1);
                    return `<span class="team-part ${baseClass}">${a}</span><span class="team-part ${baseClass}">${b}</span>`;
                } else {
                    const a = teamName.substring(0, 10);
                    const b = teamName.substring(10);
                    return `<span class="team-part ${baseClass}">${a}</span><span class="team-part ${baseClass}">${b}</span>`;
                }
            }
            return `<span class="${baseClass}">${teamName}</span>`;
        }

        function formatScoreLine(match) {
            const teamLabel = formatTeamName(`GJPB ${match.equipe}`, true);
            const adv = formatTeamName(match.adversaire || 'N/A', false);
            const x = Number(match.buts_gjpb ?? 0);
            const y = Number(match.buts_adv ?? 0);
            const lieu = (match.lieu || '').toLowerCase();
            const competition = match.competition ? `<span class="competition">${match.competition}</span>` : '';
            const dateStr = `<span class="date">${frDate(match.date)}</span>`;
            const compDate = `<div class="compdate">${competition}${dateStr ? '<br/>' : ''}${dateStr}</div>`;

            // D√©terminer la classe CSS pour le score selon le r√©sultat
            const resultClass = getResultClass(match.resultat);
            const scoreClass = resultClass || 'default';

            if (lieu === 'dom' || lieu === 'domicile') {
                return {
                    left: teamLabel,
                    score: `<span class="score-chip ${scoreClass}">${x} - ${y}</span>`,
                    right: adv,
                    date: compDate
                };
            }
            return {
                left: adv,
                score: `<span class="score-chip ${scoreClass}">${y} - ${x}</span>`,
                right: teamLabel,
                date: compDate
            };
        }

        function extractTeamName(htmlString) {
            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = htmlString;
            return tempDiv.textContent || tempDiv.innerText || '';
        }

        function extractScore(htmlString) {
            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = htmlString;
            return tempDiv.textContent || tempDiv.innerText || '';
        }

        function parsePlayerStats(statsString) {
            if (!statsString || !statsString.trim()) return [];

            const players = [];
            const entries = statsString.split(',').map(s => s.trim());

            for (const entry of entries) {
                if (!entry) continue;

                // Formats possibles: "Nom (2)", "Nom x2", "Nom 2", "Nom"
                const match1 = entry.match(/^(.+?)\s*\((\d+)\)$/);
                const match2 = entry.match(/^(.+?)\s*x(\d+)$/i);
                const match3 = entry.match(/^(.+?)\s+(\d+)$/);

                if (match1) {
                    players.push({ name: match1[1].trim(), count: parseInt(match1[2]) });
                } else if (match2) {
                    players.push({ name: match2[1].trim(), count: parseInt(match2[2]) });
                } else if (match3 && !isNaN(parseInt(match3[2]))) {
                    players.push({ name: match3[1].trim(), count: parseInt(match3[2]) });
                } else {
                    players.push({ name: entry.trim(), count: 1 });
                }
            }

            return players;
        }

        // === CHARGER & RENDRE TOUS LES R√âSULTATS ===
        async function loadAllResults() {
            const container = document.getElementById('results-list');
            container.innerHTML = 'Chargement‚Ä¶';

            const { data, error } = await supabase
                .from('matchs')
                .select('*')
                .not('resultat', 'is', null)
                .order('date', { ascending: false });

            if (error) {
                console.error(error);
                container.textContent = 'Erreur de chargement des r√©sultats.';
                return;
            }

            allMatches = data || [];
            renderResults(); // <-- filtre + rendu
        }

        function renderResults() {
            const container = document.getElementById('results-list');
            container.innerHTML = '';

            // 1) applique le filtre √âQUIPE
            const teams = selectedTeams();
            const filtered = allMatches.filter(m => teams.has(String(m.equipe)));

            if (!filtered.length) {
                container.innerHTML = `<p style="text-align:center;color:#6b7280">Aucun r√©sultat pour ces filtres.</p>`;
                return;
            }

            // 2) groupage par mois (en conservant l‚Äôordre desc d√©j√† tri√©)
            const groups = [];
            let currentKey = null, currentList = null;
            for (const m of filtered) {
                const key = monthKey(m.date);
                if (key !== currentKey) {
                    currentKey = key;
                    currentList = [];
                    groups.push({ key, items: currentList });
                }
                currentList.push(m);
            }

            // 3) rendu
            for (const g of groups) {
                const sep = document.createElement('div');
                sep.className = 'month-sep';
                sep.innerHTML = `<div class="label">${g.key}</div>`;
                container.appendChild(sep);

                g.items.forEach(match => {
                    const resultClass = getResultClass(match.resultat);
                    const view = formatScoreLine(match);

                    const row = document.createElement('div');
                    row.className = `result-item ${resultClass}`;
                    row.innerHTML = `
        <div class="result-date">${view.date}</div>
        <div class="result-teams">${view.left}</div>
        <div class="result-score">${view.score}</div>
        <div class="result-teams">${view.right}</div>
      `;

                    row.addEventListener('click', () => toggleMatchDetails(row, match));
                    row.style.cursor = 'pointer';
                    row.setAttribute('tabindex', '0');
                    row.setAttribute('role', 'button');
                    row.setAttribute('aria-label', `Voir les d√©tails du match ${extractTeamName(view.left)} vs ${extractTeamName(view.right)}`);
      row.addEventListener('keydown', (e) => {
        if (e.key === 'Enter' || e.key === ' ') { e.preventDefault(); toggleMatchDetails(row, match); }
      });

      container.appendChild(row);
    });
  }
}


    </script>
</body>

</html>